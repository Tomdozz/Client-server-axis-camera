<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>AXIS Embedded Development SDK: headerfiles/net_http.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.axis.com"><img alt="Logo" src="axis_logo.png" width="200"/></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AXIS Embedded Development SDK  
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="files.html"><span>API&#160;Specification</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('net__http_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">net_http.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interface to the http server.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;unistd.h&gt;</code><br />
</div>
<p><a href="net__http_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a0a9b612843cd3df43248406395d776db"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a9b612843cd3df43248406395d776db"></a>
typedef struct http_options&#160;</td><td class="memItemRight" valign="bottom"><b>http_options</b></td></tr>
<tr class="separator:a0a9b612843cd3df43248406395d776db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae91eb0618c7e719e38de3e291ae9ae7d"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#ae91eb0618c7e719e38de3e291ae9ae7d">http_callback</a>) (const char *method, const char *path, const http_options *options, int fd)</td></tr>
<tr class="memdesc:ae91eb0618c7e719e38de3e291ae9ae7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The typedef for a callback function registered by <a class="el" href="net__http_8h.html#aa5e56cd858d910f936615d3be1d4739a" title="Adds a handler function. ">net_http_add_path()</a>.  <a href="#ae91eb0618c7e719e38de3e291ae9ae7d">More...</a><br /></td></tr>
<tr class="separator:ae91eb0618c7e719e38de3e291ae9ae7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af3156934b5823ddfc29065b5d9a694f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#af3156934b5823ddfc29065b5d9a694f1">net_http_init</a> (const char *app_name)</td></tr>
<tr class="memdesc:af3156934b5823ddfc29065b5d9a694f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize http user library.  <a href="#af3156934b5823ddfc29065b5d9a694f1">More...</a><br /></td></tr>
<tr class="separator:af3156934b5823ddfc29065b5d9a694f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09be32f64aad7a425b3527cfa81af2b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#a09be32f64aad7a425b3527cfa81af2b2">net_http_cleanup</a> (void)</td></tr>
<tr class="memdesc:a09be32f64aad7a425b3527cfa81af2b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup of http user library.  <a href="#a09be32f64aad7a425b3527cfa81af2b2">More...</a><br /></td></tr>
<tr class="separator:a09be32f64aad7a425b3527cfa81af2b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5e56cd858d910f936615d3be1d4739a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#aa5e56cd858d910f936615d3be1d4739a">net_http_add_path</a> (const char *path, <a class="el" href="net__http_8h.html#ae91eb0618c7e719e38de3e291ae9ae7d">http_callback</a> serve_func)</td></tr>
<tr class="memdesc:aa5e56cd858d910f936615d3be1d4739a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a handler function.  <a href="#aa5e56cd858d910f936615d3be1d4739a">More...</a><br /></td></tr>
<tr class="separator:aa5e56cd858d910f936615d3be1d4739a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79f9d5c7462f1ca88d0f51fed34a0bb4"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#a79f9d5c7462f1ca88d0f51fed34a0bb4">net_http_send</a> (int fd, int seconds, const void *buf, size_t count)</td></tr>
<tr class="memdesc:a79f9d5c7462f1ca88d0f51fed34a0bb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a buffer.  <a href="#a79f9d5c7462f1ca88d0f51fed34a0bb4">More...</a><br /></td></tr>
<tr class="separator:a79f9d5c7462f1ca88d0f51fed34a0bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab681eaf249373ea5f3438af25ca254a2"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#ab681eaf249373ea5f3438af25ca254a2">net_http_send_string_utf8</a> (int fd, int seconds, const char *buf)</td></tr>
<tr class="memdesc:ab681eaf249373ea5f3438af25ca254a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a zero terminated string (uses net_http_send).  <a href="#ab681eaf249373ea5f3438af25ca254a2">More...</a><br /></td></tr>
<tr class="separator:ab681eaf249373ea5f3438af25ca254a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a570d88f751c29e3257f8f7bd64deaebb"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#a570d88f751c29e3257f8f7bd64deaebb">net_http_send_headers</a> (int fd, int seconds, const char *header1,...)</td></tr>
<tr class="memdesc:a570d88f751c29e3257f8f7bd64deaebb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a bunch of http headers (or other zero terminated strings).  <a href="#a570d88f751c29e3257f8f7bd64deaebb">More...</a><br /></td></tr>
<tr class="separator:a570d88f751c29e3257f8f7bd64deaebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc8b8373a0788b9ced4d1c3a7b035b13"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#adc8b8373a0788b9ced4d1c3a7b035b13">net_http_send_multipart_content</a> (int fd, int seconds, const char *content_type, const void *content, size_t content_length)</td></tr>
<tr class="memdesc:adc8b8373a0788b9ced4d1c3a7b035b13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a http boundary and the content.  <a href="#adc8b8373a0788b9ced4d1c3a7b035b13">More...</a><br /></td></tr>
<tr class="separator:adc8b8373a0788b9ced4d1c3a7b035b13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade993961bedd495a2c7b92209d32e18c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#ade993961bedd495a2c7b92209d32e18c">net_http_waitfor_and_handle_req</a> (int seconds)</td></tr>
<tr class="memdesc:ade993961bedd495a2c7b92209d32e18c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The core of the http handling, to be called by the "main loop".  <a href="#ade993961bedd495a2c7b92209d32e18c">More...</a><br /></td></tr>
<tr class="separator:ade993961bedd495a2c7b92209d32e18c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99f754fd93690998fa09141798aaaac3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#a99f754fd93690998fa09141798aaaac3">net_http_waitfor_req</a> (int seconds)</td></tr>
<tr class="memdesc:a99f754fd93690998fa09141798aaaac3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make it possible to detect (poll) if there is a new request waiting, without handling it.  <a href="#a99f754fd93690998fa09141798aaaac3">More...</a><br /></td></tr>
<tr class="separator:a99f754fd93690998fa09141798aaaac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a521df38fe7b89f73dde3ff80d09a4d95"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#a521df38fe7b89f73dde3ff80d09a4d95">net_http_option</a> (const http_options *options, const char *option)</td></tr>
<tr class="memdesc:a521df38fe7b89f73dde3ff80d09a4d95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to retreive a value for an option sent to the registred path.  <a href="#a521df38fe7b89f73dde3ff80d09a4d95">More...</a><br /></td></tr>
<tr class="separator:a521df38fe7b89f73dde3ff80d09a4d95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a144323bb82b2dc10b0459b621bf949ad"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="net__http_8h.html#a144323bb82b2dc10b0459b621bf949ad">net_http_querystring</a> (const http_options *options)</td></tr>
<tr class="memdesc:a144323bb82b2dc10b0459b621bf949ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to retreive the full http query string for a request sent to the registred path.  <a href="#a144323bb82b2dc10b0459b621bf949ad">More...</a><br /></td></tr>
<tr class="separator:a144323bb82b2dc10b0459b621bf949ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a742bd2bf717c726f35754bf50ac6fd29"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a742bd2bf717c726f35754bf50ac6fd29"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_CONTENT_TYPE_MULTIPART</b></td></tr>
<tr class="separator:a742bd2bf717c726f35754bf50ac6fd29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c63ccfc06c4722007625801dd75d54b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c63ccfc06c4722007625801dd75d54b"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_HTTP_HEADER_200</b></td></tr>
<tr class="separator:a9c63ccfc06c4722007625801dd75d54b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f5efa772473363bdeeeaac072c597d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a66f5efa772473363bdeeeaac072c597d"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_Content_Type_text_html_utf8</b></td></tr>
<tr class="separator:a66f5efa772473363bdeeeaac072c597d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af258cae6ead3d6f05b52fb640bcb0ee2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af258cae6ead3d6f05b52fb640bcb0ee2"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_text_html</b></td></tr>
<tr class="separator:af258cae6ead3d6f05b52fb640bcb0ee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1de19fbc4d7af33f0ed7d1b379cbcf47"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1de19fbc4d7af33f0ed7d1b379cbcf47"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_text_html_utf8</b></td></tr>
<tr class="separator:a1de19fbc4d7af33f0ed7d1b379cbcf47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8b9adf396e4afd48ee55011dd44783c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8b9adf396e4afd48ee55011dd44783c"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_http_equiv_text_html_utf8</b></td></tr>
<tr class="separator:ae8b9adf396e4afd48ee55011dd44783c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6227b7263fd424e36a576413bcd6f495"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6227b7263fd424e36a576413bcd6f495"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_CRLF</b></td></tr>
<tr class="separator:a6227b7263fd424e36a576413bcd6f495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bc524eba602432a9052c28573c3b891"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2bc524eba602432a9052c28573c3b891"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_HTTP_RESPONSE_400</b></td></tr>
<tr class="separator:a2bc524eba602432a9052c28573c3b891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd47b3099793ccebe2b106fcee9d2ad6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd47b3099793ccebe2b106fcee9d2ad6"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_HTTP_RESPONSE_404</b></td></tr>
<tr class="separator:afd47b3099793ccebe2b106fcee9d2ad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a367504455be0de7a9d46bf725dbb5a1d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a367504455be0de7a9d46bf725dbb5a1d"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_HTTP_RESPONSE_500</b></td></tr>
<tr class="separator:a367504455be0de7a9d46bf725dbb5a1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9bf4033dfddc08ead53f6f927cdf155"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa9bf4033dfddc08ead53f6f927cdf155"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>txt_HTTP_RESPONSE_503</b></td></tr>
<tr class="separator:aa9bf4033dfddc08ead53f6f927cdf155"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface to the http server. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000012">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<pre class="fragment">The http interface is used to set up dynamic http pages.
These pages contain dynamic information and are generated on-the-fly
by a handler function.

The URI as well as the handler function must be known by the embedded web server.
The first step is to ensure that a configuration file is prepared.
</pre><h1><a class="anchor" id="ex"></a>
Example</h1>
<p>In this example the application is called <code>"httpdemoapp"</code>, create a file named <code>"httpd.conf.local.httpdemoapp"</code> in the application directory of the SDK, and put the following line into the file:</p>
<div class="fragment"><div class="line">Transfer    /local/httpdemoapp/test.cgi  /var/run/http/httpdemoapp/http </div>
</div><!-- fragment --> <pre class="fragment">After the application package is installed on the Axis video product,
use the functions below to handle requests. The following is a simple example application
that registers a callback function to handle requests to \c /local/httpdemoapp/test.cgi.
The callback function will respond by outputting HTTP OK headers and then
sends the string \e Hello \e World!
</pre><div class="fragment"><div class="line"><span class="preprocessor">#define TIMEOUT_SEC 30</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">http_serve(<span class="keyword">const</span> <span class="keywordtype">char</span> *method, <span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keyword">const</span> http_options *options, <span class="keywordtype">int</span> fd)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">string</span> = <span class="stringliteral">&quot;Hello World!&quot;</span>;</div>
<div class="line">    <span class="keywordtype">int</span> ret_value;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// send header: 200 OK</span></div>
<div class="line">    ret_value = <a class="code" href="net__http_8h.html#a570d88f751c29e3257f8f7bd64deaebb">net_http_send_headers</a>(fd,</div>
<div class="line">                                      TIMEOUT_SEC,</div>
<div class="line">                                      txt_HTTP_HEADER_200,</div>
<div class="line">                                      txt_Content_Type_text_html_utf8,</div>
<div class="line">                                      txt_CRLF,</div>
<div class="line">                                      NULL);</div>
<div class="line">    <span class="comment">// send content</span></div>
<div class="line">    <span class="keywordflow">if</span> (ret_value &gt; 0) {</div>
<div class="line">        <a class="code" href="net__http_8h.html#ab681eaf249373ea5f3438af25ca254a2">net_http_send_string_utf8</a>(fd, TIMEOUT_SEC, <span class="keywordtype">string</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// close the file descriptor</span></div>
<div class="line">    close(fd);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line"> {</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="net__http_8h.html#af3156934b5823ddfc29065b5d9a694f1">net_http_init</a>(<span class="stringliteral">&quot;httpdemoapp&quot;</span>)) {</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="net__http_8h.html#aa5e56cd858d910f936615d3be1d4739a">net_http_add_path</a> (<span class="stringliteral">&quot;/local/httpdemoapp/test.cgi&quot;</span>, http_serve)) {</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line">        <a class="code" href="net__http_8h.html#ade993961bedd495a2c7b92209d32e18c">net_http_waitfor_and_handle_req</a>(0);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="Compilation"></a>
Compilation</h1>
<p>To build a program using the http interface supply the library name as <code>-lnet_http</code> and include the header file <code><a class="el" href="net__http_8h.html" title="Interface to the http server. ">net_http.h</a></code>. </p>

<p>Definition in file <a class="el" href="net__http_8h_source.html">net_http.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ae91eb0618c7e719e38de3e291ae9ae7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* http_callback) (const char *method, const char *path, const http_options *options, int fd)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The typedef for a callback function registered by <a class="el" href="net__http_8h.html#aa5e56cd858d910f936615d3be1d4739a" title="Adds a handler function. ">net_http_add_path()</a>. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000013">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">method</td><td>Method of the request function. NULL when the path belongs to "Transfer" or "TransferPost" "GET" or "POST" when the path belongs to "TransferMime" </td></tr>
    <tr><td class="paramname">path</td><td>The path of the request, e.g. /local/httpdemoapp/test.htm. </td></tr>
    <tr><td class="paramname">options</td><td>Options from request; to be retrieved via <a class="el" href="net__http_8h.html#a521df38fe7b89f73dde3ff80d09a4d95" title="Used to retreive a value for an option sent to the registred path. ">net_http_option()</a>. </td></tr>
    <tr><td class="paramname">fd</td><td>The file descriptor to be used in e.g. <a class="el" href="net__http_8h.html#a79f9d5c7462f1ca88d0f51fed34a0bb4" title="Send a buffer. ">net_http_send()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section attention"><dt>Attention</dt><dd>The application must close(fd) before leaving the callback. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void. </dd></dl>

<p>Definition at line <a class="el" href="net__http_8h_source.html#l00184">184</a> of file <a class="el" href="net__http_8h_source.html">net_http.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa5e56cd858d910f936615d3be1d4739a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int net_http_add_path </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="net__http_8h.html#ae91eb0618c7e719e38de3e291ae9ae7d">http_callback</a>&#160;</td>
          <td class="paramname"><em>serve_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a handler function. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000016">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>where the function is located in the file system/http url. Example: /local/appname/test.html. (replace appname with the name of your application, which must be unique).</td></tr>
    <tr><td class="paramname">serve_func</td><td>The handler function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, 0 on success. </dd></dl>

</div>
</div>
<a class="anchor" id="a09be32f64aad7a425b3527cfa81af2b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int net_http_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleanup of http user library. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000015">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="af3156934b5823ddfc29065b5d9a694f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int net_http_init </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize http user library. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000014">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">app_name</td><td>Name of the application. Must match the entry in httpd.conf.local.appname. (replace appname with the name of your application, which must be unique). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a521df38fe7b89f73dde3ff80d09a4d95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* net_http_option </td>
          <td>(</td>
          <td class="paramtype">const http_options *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to retreive a value for an option sent to the registred path. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000023">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>the data structure that contains the requested option. </td></tr>
    <tr><td class="paramname">option</td><td>the option that the value is requested for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value of the specified option, NULL if not found. </dd></dl>

</div>
</div>
<a class="anchor" id="a144323bb82b2dc10b0459b621bf949ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* net_http_querystring </td>
          <td>(</td>
          <td class="paramtype">const http_options *&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to retreive the full http query string for a request sent to the registred path. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000024">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>the data structure that contains the requested option.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value of http query string </dd></dl>

</div>
</div>
<a class="anchor" id="a79f9d5c7462f1ca88d0f51fed34a0bb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t net_http_send </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a buffer. </p>
<p>The <code>send()</code> is transparent, the buffer may be binary data. Note that there is a timeout on the send. If the send buffer is full, and the network is not able to empty the sendbuffer within a reasonable timeout, then either the network is unable to transfer any data or the peer is not reading data. Both cases are treated as serious and unrecoverable errors and a negative value is returned. The application should close this fd and stop using it.</p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000017">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>the file descriptor to be used.</td></tr>
    <tr><td class="paramname">seconds</td><td>Timeout: seconds to wait when there is either a network congestion or the peer is not readin data fast enough. seconds &lt; 0: wait infinitely (or until a signal is received). seconds == 0: don't wait if socket not ready, return immediately. seconds &gt; 0: wait n seconds (or until a signal is received).</td></tr>
    <tr><td class="paramname">buf</td><td>buffer to be send.</td></tr>
    <tr><td class="paramname">count</td><td>number of bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>positive value (number of bytes written) if succeeded to write all headers, negative value (errno) otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a570d88f751c29e3257f8f7bd64deaebb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t net_http_send_headers </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>header1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a bunch of http headers (or other zero terminated strings). </p>
<p><b>Example:</b> <code>net_http_send_headers</code>(fd, txt_HTTP_RESPONSE_500, txt_CRLF, NULL);</p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000019">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>the file descriptor to be used.</td></tr>
    <tr><td class="paramname">seconds</td><td>Timeout: seconds to wait when there is either a network congestion or the peer is not readin data fast enough. seconds &lt; 0: wait infinitely (or until a signal is received). seconds == 0: don't wait if socket not ready, return immediately. seconds &gt; 0: wait n seconds (or until a signal is received).</td></tr>
    <tr><td class="paramname">header1</td><td>the file descriptor to be used.</td></tr>
    <tr><td class="paramname">...</td><td>more zero terminated strings to be send, terminate the string array with NULL pointer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>positive value (number of bytes written) if succeeded to write all headers, negative value (errno) otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="adc8b8373a0788b9ced4d1c3a7b035b13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t net_http_send_multipart_content </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>content_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>content_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a http boundary and the content. </p>
<p>(The header <code>txt_CONTENT_TYPE_MULTIPART</code> must have been sent once).</p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000020">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>the file descriptor to be used.</td></tr>
    <tr><td class="paramname">seconds</td><td>Timeout: seconds to wait when there is either a network congestion or the peer is not readin data fast enough. seconds &lt; 0: wait infinitely (or until a signal is received). seconds == 0: don't wait if socket not ready, return immediately. seconds &gt; 0: don't wait if socket not ready, return immediately.</td></tr>
    <tr><td class="paramname">content_type</td><td>e.g. txt_text_html_utf8, or "image/jpeg".</td></tr>
    <tr><td class="paramname">content</td><td>pointer to the content e.g. the jpeg buffer.</td></tr>
    <tr><td class="paramname">content_length</td><td>the lenght of the content.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>positive value (number of bytes written) if succeeded to write all headers, negative value (errno) otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ab681eaf249373ea5f3438af25ca254a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t net_http_send_string_utf8 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a zero terminated string (uses net_http_send). </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000018">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>the file descriptor to be used.</td></tr>
    <tr><td class="paramname">seconds</td><td>Timeout: seconds to wait when there is either a network congestion or the peer is not readin data fast enough. seconds &lt; 0: wait infinitely (or until a signal is received). seconds == 0: don't wait if socket not ready, return immediately. seconds &gt; 0: don't wait if socket not ready, return immediately.</td></tr>
    <tr><td class="paramname">buf</td><td>a string. Either coded as "utf-8" or "ISO-8859-1".</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>positive value (number of bytes written) if succeeded to write all headers, negative value (errno) otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ade993961bedd495a2c7b92209d32e18c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void net_http_waitfor_and_handle_req </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The core of the http handling, to be called by the "main loop". </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000021">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seconds</td><td>this function will wait the number of seconds for a http request which should be handled. If a request has come in, this function will indirectly call the registerered handler function- see net_http_add_path. seconds &lt; 0: wait forever (and call the handler if there is any outstanding request). seconds == 0: don't wait, just poll once (and call the handler if there is any outstanding request). seconds &gt; 0: wait max the number of seconds. (and call the handler if there is any outstanding request).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void. </dd></dl>

</div>
</div>
<a class="anchor" id="a99f754fd93690998fa09141798aaaac3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int net_http_waitfor_req </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make it possible to detect (poll) if there is a new request waiting, without handling it. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000022">Deprecated:</a></b></dt><dd>This API has been deprecated and replaced by the AXHttp API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seconds</td><td>this function will wait the number of seconds for a http request which should be handled. If a request has come in, this function will return. (it will even return if a signal has been received). seconds &lt; 0: wait forever. seconds == 0: don't wait, just poll once. seconds &gt; 0: wait max the number of seconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>&gt; 0 : one or more outstanding requests. == 0: no outstanding request after timeout. &lt; 0 : error (or signal reveived). </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_4f43d8136aaab5667ade3e51917595cd.html">headerfiles</a></li><li class="navelem"><a class="el" href="net__http_8h.html">net_http.h</a></li>
    <li id="footer1">Copyright &copy; 2009-2015 Axis Communications AB. All rights reserved.  
	 </li>	 
	<li id="footer2">		     
	AXIS Embedded Development SDK version 2.0.2. Created: Fri Jul 17 2015.</li>     	
  </ul>
</div>
</body>
</html>
